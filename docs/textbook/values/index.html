
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Harmony Language Details - HarmonyDocs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/styles.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#harmony-language-details" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HarmonyDocs" class="md-header__button md-logo" aria-label="HarmonyDocs" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HarmonyDocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Harmony Language Details
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HarmonyDocs" class="md-nav__button md-logo" aria-label="HarmonyDocs" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    HarmonyDocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Textbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Textbook" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Textbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        1 On Concurrent Programming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../harmonyintro/" class="md-nav__link">
        2 Hello World! 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concurrent/" class="md-nav__link">
        3 The Problem of Concurrent Programming 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../harmonymachine/" class="md-nav__link">
        4 The Harmony Virtual Machine 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../critical/" class="md-nav__link">
        5 Critical Sections 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../peterson/" class="md-nav__link">
        6 Peterson's Algorithm 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../method/" class="md-nav__link">
        7 Harmony Methods and Pointers 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../specification/" class="md-nav__link">
        8 Specification 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spinlock/" class="md-nav__link">
        9 Spinlock 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../synch/" class="md-nav__link">
        10 Lock Implementations 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cds/" class="md-nav__link">
        11 Concurrent Data Structures 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../finegrained/" class="md-nav__link">
        12 Fine-Grained Locking 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        13 Testing 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        14 Debugging 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../condwait/" class="md-nav__link">
        15 Conditional Waiting 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sbs/" class="md-nav__link">
        16 Split Binary Semaphores 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../starvation/" class="md-nav__link">
        17 Starvation 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitors/" class="md-nav__link">
        18 Monitors 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deadlock/" class="md-nav__link">
        19 Deadlock 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../actor/" class="md-nav__link">
        20 Actors and Message Passing 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../barrier/" class="md-nav__link">
        21 Barrier Synchronization 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../interrupts/" class="md-nav__link">
        22 Interrupts 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nonblocking/" class="md-nav__link">
        23 Non-Blocking Synchronization 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../abp/" class="md-nav__link">
        24 Alternating Bit Protocol 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../leader/" class="md-nav__link">
        25 Leader Election 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2pc/" class="md-nav__link">
        26 Transactions and Two Phase Commit 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../chain/" class="md-nav__link">
        27 Chain Replication 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../abd/" class="md-nav__link">
        28 Replicated Atomic Read/Write Register 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consensus/" class="md-nav__link">
        29 Distributed Consensus 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../paxos/" class="md-nav__link">
        30 Paxos 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ns/" class="md-nav__link">
        31 Needham-Schroeder Authentication Protocol 
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commandline/" class="md-nav__link">
        Using the Command Line
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Harmony Language Details
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Harmony Language Details
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#value-types-and-operators" class="md-nav__link">
    Value Types and Operators
  </a>
  
    <nav class="md-nav" aria-label="Value Types and Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boolean" class="md-nav__link">
    Boolean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    Integer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set" class="md-nav__link">
    Set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-or-tuple" class="md-nav__link">
    List or Tuple
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionary" class="md-nav__link">
    Dictionary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bag-or-multiset" class="md-nav__link">
    Bag or Multiset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#program-counter" class="md-nav__link">
    Program Counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    Address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav" aria-label="Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-expression-evaluation" class="md-nav__link">
    Single expression evaluation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment" class="md-nav__link">
    Assignment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assert" class="md-nav__link">
    assert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomically" class="md-nav__link">
    atomically
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#await" class="md-nav__link">
    await
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#const" class="md-nav__link">
    const
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#def" class="md-nav__link">
    def
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#del" class="md-nav__link">
    del
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-in-where" class="md-nav__link">
    for ... in ... [where ...]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-import" class="md-nav__link">
    from ... import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go" class="md-nav__link">
    go
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-elif-else" class="md-nav__link">
    if ... [elif ...]* [else]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import" class="md-nav__link">
    import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invariant" class="md-nav__link">
    invariant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#let" class="md-nav__link">
    let
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pass" class="md-nav__link">
    pass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    print
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential" class="md-nav__link">
    sequential
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spawn" class="md-nav__link">
    spawn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trap" class="md-nav__link">
    trap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#var" class="md-nav__link">
    var
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when" class="md-nav__link">
    when
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-exists-in" class="md-nav__link">
    when exists ... in ...
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while" class="md-nav__link">
    while
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harmony-is-not-object-oriented" class="md-nav__link">
    Harmony is not object-oriented
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constants-global-and-local-variables" class="md-nav__link">
    Constants, Global and Local Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-precedence" class="md-nav__link">
    Operator Precedence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tuples-lists-and-pattern-matching" class="md-nav__link">
    Tuples, Lists, and Pattern Matching
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-allocation" class="md-nav__link">
    Dynamic Allocation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hvm/" class="md-nav__link">
        The Harmony Virtual Machine 
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howitworks/" class="md-nav__link">
        How Harmony Works
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../module/" class="md-nav__link">
        Harmony Modules
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../acknowledgments/" class="md-nav__link">
        Acknowledgments
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#value-types-and-operators" class="md-nav__link">
    Value Types and Operators
  </a>
  
    <nav class="md-nav" aria-label="Value Types and Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#boolean" class="md-nav__link">
    Boolean
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integer" class="md-nav__link">
    Integer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    String
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set" class="md-nav__link">
    Set
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-or-tuple" class="md-nav__link">
    List or Tuple
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionary" class="md-nav__link">
    Dictionary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bag-or-multiset" class="md-nav__link">
    Bag or Multiset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#program-counter" class="md-nav__link">
    Program Counter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    Address
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    Context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav" aria-label="Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-expression-evaluation" class="md-nav__link">
    Single expression evaluation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignment" class="md-nav__link">
    Assignment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assert" class="md-nav__link">
    assert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomically" class="md-nav__link">
    atomically
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#await" class="md-nav__link">
    await
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#const" class="md-nav__link">
    const
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#def" class="md-nav__link">
    def
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#del" class="md-nav__link">
    del
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-in-where" class="md-nav__link">
    for ... in ... [where ...]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-import" class="md-nav__link">
    from ... import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go" class="md-nav__link">
    go
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if-elif-else" class="md-nav__link">
    if ... [elif ...]* [else]
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import" class="md-nav__link">
    import
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invariant" class="md-nav__link">
    invariant
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#let" class="md-nav__link">
    let
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pass" class="md-nav__link">
    pass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    print
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sequential" class="md-nav__link">
    sequential
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spawn" class="md-nav__link">
    spawn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trap" class="md-nav__link">
    trap
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#var" class="md-nav__link">
    var
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when" class="md-nav__link">
    when
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-exists-in" class="md-nav__link">
    when exists ... in ...
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#while" class="md-nav__link">
    while
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harmony-is-not-object-oriented" class="md-nav__link">
    Harmony is not object-oriented
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constants-global-and-local-variables" class="md-nav__link">
    Constants, Global and Local Variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-precedence" class="md-nav__link">
    Operator Precedence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tuples-lists-and-pattern-matching" class="md-nav__link">
    Tuples, Lists, and Pattern Matching
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-allocation" class="md-nav__link">
    Dynamic Allocation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="harmony-language-details">Harmony Language Details</h1>
<h2 id="value-types-and-operators">Value Types and Operators</h2>
<p><a href="../harmonymachine/">Chapter 4</a> provides an introduction to Harmony values
Below is a complete list of Harmony value types with examples:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boolean</td>
<td>"bool"</td>
<td><code>False</code>, <code>True</code></td>
</tr>
<tr>
<td>Integer</td>
<td>"int"</td>
<td>..., --2, --1, 0, 1, 2, ...</td>
</tr>
<tr>
<td>String</td>
<td>"str"</td>
<td><code>"</code>example<code>"</code>, .<em>example</em></td>
</tr>
<tr>
<td>Program Counter</td>
<td>"pc"</td>
<td>(method names and labels are program counter constants)</td>
</tr>
<tr>
<td>List</td>
<td>"list"</td>
<td>[ 1, 2, 3, ], ( (1, 2), 3 ), [1,], ()</td>
</tr>
<tr>
<td>Dictionary</td>
<td>"dict"</td>
<td>{ .<em>account</em>: 12345, .<em>valid</em>: <code>False</code> }, {:}</td>
</tr>
<tr>
<td>Set</td>
<td>"set"</td>
<td>{}, { 1, 2, 3 }, { <code>False</code>, .<em>id</em>, 3 }</td>
</tr>
<tr>
<td>Address</td>
<td>"address"</td>
<td>?<em>lock</em>, ?<em>flags</em>[2], <code>None</code></td>
</tr>
<tr>
<td>Context</td>
<td>"context"</td>
<td>(generated by <strong>stop</strong> or <strong>save</strong> expression)</td>
</tr>
</tbody>
</table>
<p>In Harmony, there is no distinction between tuples (denoted with
parentheses) and lists (denoted by square brackets).
That is, their format is either (e, e, ..., e,) or [e, e, ..., e,].
They map indexes (starting at 0) to Harmony values.
If the list has two or more elements, then the final comma is optional.</p>
<p>Method <code>type e</code> returns the type name of <code>e</code>.</p>
<p>All Harmony values are ordered with respect to one another. First they
are ordered by type according to the table above. So, for example,
<code>True</code> <span class="arithmatex">\(&lt;\)</span> 0 <span class="arithmatex">\(&lt;\)</span> .<em>xyz</em> <span class="arithmatex">\(&lt;\)</span> { 0 }. Within types, the following rules
apply:</p>
<ul>
<li>
<p><code>False</code> <span class="arithmatex">\(&lt;\)</span> <code>True</code>;</p>
</li>
<li>
<p>integers are ordered in the natural way;</p>
</li>
<li>
<p>strings are lexicographically ordered;</p>
</li>
<li>
<p>program counters are ordered by their integer values;</p>
</li>
<li>
<p>lists are lexicographically ordered;</p>
</li>
<li>
<p>dictionaries are first converted into a list of ordered (key, value)
    pairs. Then two dictionaries are lexicographically ordered by this
    representation;</p>
</li>
<li>
<p>a set is first converted into an ordered list, then
    lexicographically ordered;</p>
</li>
<li>
<p>an address is a list of Harmony values. <code>None</code> is the empty list.
    Addresses are lexicographically ordered accordingly;</p>
</li>
<li>
<p>contexts () are ordered first by name, then by program counter, then
    by the remaining content in an unspecified way.</p>
</li>
</ul>
<p>Harmony supports the following comparison operators:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>e</em> == <em>e</em></td>
<td>equivalence</td>
</tr>
<tr>
<td><em>e</em> != <em>e</em></td>
<td>inequivalence</td>
</tr>
<tr>
<td><em>e</em> <span class="arithmatex">\(&lt;\)</span> <em>e</em>, <em>e</em> <span class="arithmatex">\(&lt;=\)</span> <em>e</em>, <em>e</em> <span class="arithmatex">\(&gt;\)</span> <em>e</em>, <em>e</em> <span class="arithmatex">\(&gt;=\)</span> <em>e</em></td>
<td>comparison</td>
</tr>
</tbody>
</table>
<p>Comparison operators can be chained: <code>x &lt;= y == z</code>
means <code>x &lt;= y and y == z</code>, although <em>y</em> is evaluated once in the
former and twice in the latter expression.</p>
<p>Harmony supports atomic expression evaluation using the
following syntax: <code>atomically e</code>, where <code>e</code> is some expression.</p>
<h3 id="boolean">Boolean</h3>
<p>The boolean type has only two possible values: <code>False</code> and <code>True</code>.
Unlike in Python, in Harmony booleans are distinct from integers, and in
particular <span class="arithmatex">\(\mathbf{False} &lt; 0\)</span>. In statements and expressions where
booleans are expected, it is not possible to substitute values of other
types.</p>
<p>Operations on booleans include:</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><em>e</em> <strong>and</strong> <em>e</em> <strong>and</strong> ...</td>
<td>conjuction</td>
</tr>
<tr>
<td><em>e</em> <strong>or</strong> <em>e</em> <strong>or</strong> ...</td>
<td>disjunction</td>
</tr>
<tr>
<td><em>e</em> =<span class="arithmatex">\(&gt;\)</span> <em>e</em>, <em>e</em> <strong>not</strong> =<span class="arithmatex">\(&gt;\)</span> <em>e</em></td>
<td>implication</td>
</tr>
<tr>
<td><strong>not</strong> <em>e</em></td>
<td>negation</td>
</tr>
<tr>
<td><em>v</em> <strong>if</strong> <em>e</em> <strong>else</strong> <em>v</em>'</td>
<td><em>v</em> or <em>v</em>' depending on <em>e</em></td>
</tr>
<tr>
<td><strong>any</strong> <em>s</em>, <strong>all</strong> <em>s</em></td>
<td>disjunction / conjunction for set or list <em>s</em></td>
</tr>
</tbody>
</table>
<h3 id="integer">Integer</h3>
<p>The integer type supports any whole number.
In the C-based model checker, integers are currently implemented
by two's complement 60-bit words.  The model checker checks for
overflow on various operations.</p>
<p>Operations on integers include:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>-e</em></td>
<td>negation</td>
</tr>
<tr>
<td><strong>abs</strong>(<em>e</em>)</td>
<td>absolute value</td>
</tr>
<tr>
<td><em>e</em> + <em>e</em> + ...</td>
<td>sum</td>
</tr>
<tr>
<td><em>e</em> - <em>e</em></td>
<td>difference</td>
</tr>
<tr>
<td><em>e</em> * <em>e</em> * <em>e</em> ...</td>
<td>product</td>
</tr>
<tr>
<td><em>e</em> / e, <em>e</em> // <em>e</em></td>
<td>integer division</td>
</tr>
<tr>
<td><em>e</em> % e, <em>e</em> <strong>mod</strong> <em>e</em></td>
<td>integer division remainder</td>
</tr>
<tr>
<td><em>e</em> <em><em> </em>e</em></td>
<td>power</td>
</tr>
<tr>
<td><em>~e</em></td>
<td>binary inversion</td>
</tr>
<tr>
<td><em>e</em></td>
<td><em>e</em></td>
</tr>
<tr>
<td><em>e</em></td>
<td><em>e</em></td>
</tr>
<tr>
<td><em>e</em> ^ <em>e</em> ^ ...</td>
<td>binary exclusive or</td>
</tr>
<tr>
<td><em>e</em> &lt;&lt; <em>e</em></td>
<td>binary shift left</td>
</tr>
<tr>
<td><em>e</em> &gt;&gt; <em>e</em></td>
<td>binary shift right</td>
</tr>
<tr>
<td>{ <em>e</em>..<em>e'</em> }</td>
<td>set of integers from <em>e</em> to <em>e'</em> inclusive</td>
</tr>
</tbody>
</table>
<h3 id="string">String</h3>
<p>A string is a sequence of zero or more unicode characters. If it
consists entirely of alphanumerical characters or underscore characters
and does not start with a digit, then a string can be represented by a
"." followed by the characters. For example, .<em>example</em> is the same as
the string <code>"</code>example<code>"</code>.</p>
<p>Native operations on strings include the following:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>s</em> <em>k</em></td>
<td>indexing</td>
</tr>
<tr>
<td><em>s</em> + <em>s</em> + ...</td>
<td>concatenation</td>
</tr>
<tr>
<td><em>s</em> * <em>n</em></td>
<td><em>n</em> copies of <em>s</em> concatenated</td>
</tr>
<tr>
<td><em>v</em> [<strong>not</strong>] <strong>in</strong> <em>s</em></td>
<td>check if <em>v</em> is [not] a substring in <em>s</em></td>
</tr>
<tr>
<td><strong>len</strong> <em>s</em></td>
<td>the length of <em>s</em></td>
</tr>
<tr>
<td><strong>str</strong> <em>e</em></td>
<td>string representation of any value <em>e</em></td>
</tr>
</tbody>
</table>
<h3 id="set">Set</h3>
<p>In Harmony you can create a set of any collection of Harmony values. Its
syntax is <code>{ v_0, v_1, ... }</code>. Python users: note that in Harmony the
empty set is denoted as <span class="arithmatex">\(\{\}\)</span>.</p>
<p>The <code>set</code> module contains various convenient routines that operate on
sets. Native operations on sets include:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>len</strong> <em>s</em></td>
<td>cardinality</td>
</tr>
<tr>
<td><em>s</em> -- <em>s</em></td>
<td>set difference</td>
</tr>
<tr>
<td><em>s</em> &amp; <em>s</em> &amp; ...</td>
<td>intersection</td>
</tr>
<tr>
<td><em>s</em> <span class="arithmatex">\(\vert\)</span> <em>s</em> <span class="arithmatex">\(\vert\)</span> ...</td>
<td>union</td>
</tr>
<tr>
<td><em>s</em> \^ <em>s</em> \^ ...</td>
<td>inclusion/exclusion (elements in odd number of sets)</td>
</tr>
<tr>
<td><strong>choose</strong> <em>s</em></td>
<td>select an element (Harmony will try all)</td>
</tr>
<tr>
<td><strong>min</strong> <em>s</em></td>
<td>minimum element</td>
</tr>
<tr>
<td><strong>max</strong> <em>s</em></td>
<td>maximum element</td>
</tr>
<tr>
<td><strong>any</strong> <em>s</em></td>
<td><code>True</code> if any value is <code>True</code></td>
</tr>
<tr>
<td><strong>all</strong> <em>s</em></td>
<td><code>True</code> if all values are <code>True</code></td>
</tr>
</tbody>
</table>
<p>Harmony also supports <em>set comprehension</em>. In its simplest form,
<code>{ f(v) for v in s }</code> returns a set that is constructed by applying <code>f</code>
to all elements in <em>s</em> (where <em>s</em> is a set or a list). This is known as
<em>mapping</em>. But set comprehension is much more powerful and can include
joining multiple sets (using nested for loops) and filtering (using the
<code>where</code> keyword).</p>
<p>For example: <code>{ x + y for x in s for y in s where (x * y) == 4 }</code>
returns a set that is constructed by summing pairs of elements from <em>s</em>
that, when multiplied, have the value 4.</p>
<h3 id="list-or-tuple">List or Tuple</h3>
<p>In Harmony, there is no distinction between a list or a tuple.
You can denote a list by a sequence of values, each value terminated
by a comma.  As per usual, you can use brackets or parentheses
at your discretion.  For Python users, the important thing to note
is that a singleton list in Harmony must contain a comma.  For
example <code>[1,]</code> is a list containing the value <code>1</code>, while <code>[1]</code>
is simply the value <code>1</code>.</p>
<p>The <code>list</code> module contains various
convenient routines that operate on lists or tuples.
Native operations on lists or tuples include the following:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>t</em> <em>k</em></td>
<td>indexing</td>
</tr>
<tr>
<td><em>t</em> + <em>t</em> + ...</td>
<td>concatenation</td>
</tr>
<tr>
<td><em>t</em> * <em>n</em></td>
<td><em>n</em> copies of <em>t</em> concatenated</td>
</tr>
<tr>
<td><em>v</em> [not] in <em>t</em></td>
<td>check if <em>v</em> is [not] a value in <em>t</em></td>
</tr>
<tr>
<td><strong>len</strong> <em>t</em></td>
<td>the length of <em>t</em></td>
</tr>
<tr>
<td><strong>min</strong> <em>t</em></td>
<td>the minimum value in <em>t</em></td>
</tr>
<tr>
<td><strong>max</strong> <em>t</em></td>
<td>the maximum value in <em>t</em></td>
</tr>
<tr>
<td><strong>any</strong> <em>t</em></td>
<td><code>True</code> if any value is <code>True</code></td>
</tr>
<tr>
<td><strong>all</strong> <em>t</em></td>
<td><code>True</code> if all values are <code>True</code></td>
</tr>
</tbody>
</table>
<p>Lists and tuples support comprehension.
In its most basic form: <code>[f(v) for v in t]</code>.
For example, to check if any element in a list <code>t</code> is even, you
can write: <code>any((x % 2) == 0 for x in t)</code>.</p>
<h3 id="dictionary">Dictionary</h3>
<p>A dictionary maps a set of values (known as <em>keys</em>) to another set of
values. The generic syntax of a dictionary is
<span class="arithmatex">\(\{ k_0:v_0, k_1:v_1, ... \}\)</span>. Different from Python, the empty
dictionary is written as <code>{:}</code> (because {} is the empty set in
Harmony). If there are duplicate keys in the list, then only the one
with the maximum value survives. Therefore the order of the keys in the
dictionary does not matter.</p>
<p>Dictionaries support comprehension. The basic form is: {
<code>f</code>(<em>v</em>):<code>g</code>(<em>v</em>) <strong>for</strong> <em>v</em> <strong>in</strong> <em>s</em> }.</p>
<p>There are various special cases of dictionaries, including lists,
tuples, strings, and bags (multisets) that are individually described
below.</p>
<p>Operations on dictionaries include the following:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>d</em> <em>k</em></td>
<td>indexing</td>
</tr>
<tr>
<td><strong>len</strong> <em>d</em></td>
<td>the number of keys in <em>d</em></td>
</tr>
<tr>
<td><strong>keys</strong> <em>d</em></td>
<td>the set of keys in <em>d</em></td>
</tr>
<tr>
<td><em>k</em> [<strong>not</strong>] <strong>in</strong> <em>d</em></td>
<td>check if <em>k</em> is [not] a value in <em>d</em></td>
</tr>
<tr>
<td><strong>min</strong> <em>d</em></td>
<td>the minimum value in <em>d</em></td>
</tr>
<tr>
<td><strong>max</strong> <em>d</em></td>
<td>the maximum value in <em>d</em></td>
</tr>
<tr>
<td><strong>any</strong> <em>d</em></td>
<td><code>True</code> if any value is <code>True</code></td>
</tr>
<tr>
<td><strong>all</strong> <em>d</em></td>
<td><code>True</code> if all values are <code>True</code></td>
</tr>
<tr>
<td><em>d</em> &amp; <em>d</em> &amp; ...</td>
<td>dictionary intersection</td>
</tr>
<tr>
<td><em>d</em> <span class="arithmatex">\(\vert\)</span> <em>d</em> <span class="arithmatex">\(\vert\)</span> ...</td>
<td>dictionary union</td>
</tr>
</tbody>
</table>
<p>Because in Harmony brackets are used for parsing purposes only, you can
write <em>d</em>[<em>k</em>] (or <em>d</em>(<em>k</em>)) instead of <em>d</em> <em>k</em>. However, if <em>k</em> is a
string like .<em>id</em>, then you might prefer the notation <em>k</em>.<em>id</em>.</p>
<p>Dictionary intersection and dictionary union are defined so that they
work well with bags. With disjoint dictionaries, intersection and union
work as expected. If there is a key in the intersection, then dictionary
intersection retains the minimum value while dictionary union retains
the maximum value. Unlike Python, Harmony dictionary intersection and
union are commutative and associative.</p>
<h3 id="bag-or-multiset">Bag or Multiset</h3>
<p>A bag is represented by a dictionary that maps each element to its
multiplicity, for example: { 10:2, 12:1 }. The <code>bag</code> module contains
various convenient routines that operate on lists or tuples. Native
operations on bags include the following:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>v</em> [<strong>not</strong>] <strong>in</strong> <em>b</em></td>
<td>check if <em>v</em> is [not] in <em>b</em></td>
</tr>
<tr>
<td><em>t</em> &amp; <em>t</em> &amp; ...</td>
<td>bag intersection</td>
</tr>
<tr>
<td><em>t</em> <span class="arithmatex">\(\vert\)</span> <em>t</em> <span class="arithmatex">\(\vert\)</span> ...</td>
<td>bag union</td>
</tr>
</tbody>
</table>
<h3 id="program-counter">Program Counter</h3>
<p>A program counter is an integer that can be used to index into Harmony
bytecode. When you define a method, a lambda function, or a label, you
are creating a constant of the program counter type.</p>
<p>Operations on program counters include the following:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>m</em> <em>a</em></td>
<td>invoke method with program counter <em>m</em> and argument <em>a</em></td>
</tr>
<tr>
<td><strong>countLabel</strong> <em>l</em></td>
<td>return the number of threads executing at label <em>l</em></td>
</tr>
</tbody>
</table>
<p>You can create lambda functions similarly to Python, except that the
expression has to end on the keyword <strong>end</strong>. For example:
<strong>lambda</strong>(<em>x</em>,<em>y</em>): <em>x</em>+<em>y</em> <strong>end</strong>.</p>
<h3 id="address">Address</h3>
<p>In Harmony, each shared variable has an address, which is essentially a
list of Harmony values. For example, the address of variable
<em>d</em>.<em>v</em>[3] consists of the list .<em>d</em>, .<em>v</em>, and 3. The only way to
construct an address in Harmony is using the ? operator. ?<em>d</em>.<em>v</em>[3]
returns the address of variable <em>d</em>.<em>v</em>[3]. An address can be
dereferenced to return the value of the variable. If <em>a</em> is an address,
then !<em>a</em> returns the value. Like C, Harmony supports the shorthand
<em>a</em>-&gt;<em>v</em> for the expression (!<em>a</em>).<em>v</em>.</p>
<h3 id="context">Context</h3>
<p>A context value (aka continuation) captures the state of a thread.
A context is itself composed over various Harmony values.</p>
<p>The following operations generate contexts:</p>
<table>
    <tr>
        <td><code>save e</code></td>
        <td>returns a Harmony value (see below)</td>
    </tr>
    <tr>
        <td><code>stop p</code></td>
        <td>saves context in <code>!p</code> and stops the thread (see below)</td>
    </tr>
</table>

<p>The <code>save e</code> expression, when invoked, returns a tuple <code>(e, c)</code> where
<code>c</code> is the context value of the thread right after the <code>save</code> instruction
finished.
Using <code>go c r</code> the context can be turned into a new thread that, instead,
returns <code>r</code> from the <code>save e</code> expression.  See Figure A.1
for an example of how this could be used to <em>fork</em> a thread into
two threads.</p>
<p>The <code>stop p</code> expression stores the context of the thread right after
the expression in <code>!p</code> (i.e., <code>p</code> must be an address value) and
terminates the thread.  The thread can later be reinstantiated with
<code>go !p r</code>, in which case the <code>stop</code> expression returns <code>r</code>.
A thread can be for ever suspended using <code>stop None</code> or just <code>stop()</code>.</p>
<h2 id="statements">Statements</h2>
<p>Harmony currently supports the following statements (below, <code>S</code> is a
list of statements):</p>
<table>
<thead>
<tr>
<th>Statement</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>e</em></td>
<td><em>e</em> is an expression</td>
</tr>
<tr>
<td><em>lv</em> = [<em>lv</em> =]... <em>e</em></td>
<td><em>lv</em> is an lvalue and <em>e</em> is an expression</td>
</tr>
<tr>
<td><em>lv</em> [<em>op</em>]= <em>e</em></td>
<td><em>op</em> is one of <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>&amp;</code>, <code>|</code>, <code>^</code>, <strong>and</strong>, <strong>or</strong></td>
</tr>
<tr>
<td><em>l</em>: <code>S</code></td>
<td><em>l</em> is a label</td>
</tr>
<tr>
<td><strong>assert</strong> <em>b</em> [, <em>e</em>]</td>
<td><em>b</em> is a boolean. Optionally report value of expression <em>e</em></td>
</tr>
<tr>
<td><strong>await</strong> <em>b</em></td>
<td><em>b</em> is a boolean</td>
</tr>
<tr>
<td><strong>const</strong> <em>a</em> = <em>e</em></td>
<td><em>a</em> is a bound variable, <em>e</em> is a constant expression</td>
</tr>
<tr>
<td><strong>def</strong> <em>m</em> <em>a</em>: <code>S</code></td>
<td><em>m</em> is an identifier, <em>a</em> a bound variable</td>
</tr>
<tr>
<td><strong>del</strong> <em>lv</em></td>
<td>delete <em>lv</em></td>
</tr>
<tr>
<td><strong>for</strong> <em>a</em>[:<em>b</em>] <strong>in</strong> <em>e</em> [<strong>where</strong> <em>c</em>]: <code>S</code></td>
<td><em>a</em> and <em>b</em> are bound variables, <em>e</em> is a set, dictionary, or string</td>
</tr>
<tr>
<td><strong>from</strong> <em>m</em> <strong>import</strong> ...</td>
<td><em>m</em> identifies a module</td>
</tr>
<tr>
<td><strong>go</strong> <em>c</em> <em>e</em></td>
<td><em>c</em> is a context, <em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>if</strong> <em>b</em>: <code>S</code> <strong>else</strong>: <code>S</code></td>
<td><em>b</em> is a boolean, <code>S</code> is a list of statements</td>
</tr>
<tr>
<td><strong>import</strong> <em>m</em>, ...</td>
<td><em>m</em> identifies a module</td>
</tr>
<tr>
<td><strong>invariant</strong> <em>e</em></td>
<td><em>e</em> is an invariant</td>
</tr>
<tr>
<td><strong>let</strong> <em>a</em> = <em>e</em>: <code>S</code></td>
<td><em>a</em> is a bound variable, <em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>pass</strong></td>
<td>do nothing</td>
</tr>
<tr>
<td><strong>print</strong> <em>e</em></td>
<td><em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>sequential</strong> <em>v</em>, ...</td>
<td><em>v</em> has sequential consistency</td>
</tr>
<tr>
<td><strong>spawn</strong> [<strong>eternal</strong>] <em>m</em> <em>e</em> [, <em>t</em>]</td>
<td><em>m</em> is a method, <em>e</em> is an expression, <em>t</em> is the thread-local state</td>
</tr>
<tr>
<td><strong>trap</strong> <em>m</em> <em>e</em></td>
<td><em>m</em> is a method and <em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>var</strong> <em>v</em> = <em>e</em></td>
<td><em>v</em> is a new variable, <em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>when</strong> <em>b</em>: <code>S</code></td>
<td><em>b</em> is a boolean, <code>S</code> a list of statements</td>
</tr>
<tr>
<td><strong>when</strong> <strong>exists</strong> <em>a</em> <strong>in</strong> <em>e</em>: <code>S</code></td>
<td><em>a</em> is a bound variable, <em>e</em> is an expression</td>
</tr>
<tr>
<td><strong>while</strong> <em>b</em>: <code>S</code></td>
<td><em>b</em> is a boolean, <code>S</code> a list of statements</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Bound variables are read-only.</p>
</li>
<li>
<p>A statement can be preceded by the <strong>atomically</strong> keyword to make
    the statement atomic.</p>
</li>
<li>
<p>Multiple <strong>for</strong> statements can be combined into a single statement.</p>
</li>
<li>
<p>Multiple <strong>let</strong> and <strong>when</strong> statements can be combined into a
    single statement.</p>
</li>
</ul>
<h3 id="single-expression-evaluation">Single expression evaluation</h3>
<p>Any expression by itself can be used as a statement. The most common
form of this is a function application, for example: <code>f</code>(). This
statement evaluates <code>f</code>() but ignores its result. It is equivalent to
the assignment statement <span class="arithmatex">\(\_ = \mathtt{f}()\)</span>.</p>
<h3 id="assignment">Assignment</h3>
<p>The statement <em>x</em> = 3 changes the state by assigning3 to variable <em>x</em>
(assuming<em>x</em> was not already3). <em>x</em> may be a local variable or a
shared variable. The statement <em>x</em> = <em>y</em> = 3 first updates<em>y</em>,
then<em>x</em>. The statement <em>x</em>[<code>f</code>()] = <em>y</em>[<code>g</code>()] = <code>h</code>() first
computes the address of <em>x</em>[<code>f</code>()], then computes the address of
<em>y</em>[<code>g</code>()], then evaluates <code>h</code>(), then assigns the resulting value to
<em>y</em>[<code>g</code>()] (using its previously computed address), and finally
assigns the same value to <em>x</em>[<code>f</code>()] (again using its previously
computed address). The statement <em>a</em>,<em>b</em> = <em>c</em> assumes that <em>c</em> is a
tuple with two values. It first evaluates the addresses of <em>a</em> and <em>b</em>
and first assigns to the latter and then the former. If <em>c</em> is not a
tuple with two values, then Harmony will report an error.</p>
<p>Assigning to <code>_</code> evaluates the righthand side expression but is
otherwise a no-op.</p>
<p>The statement <span class="arithmatex">\(x~+\)</span><span class="arithmatex">\(= 3\)</span> loads <em>x</em>, adds 3, and then stores the results
in <em>x</em>. In this case, it is equivalent to <span class="arithmatex">\(x = x + 3\)</span>. However, in
general this is not so. For example, <em>x</em>[<code>f</code>()] += 3 only evaluates
<code>f</code>() once. Unlike Python, however, <em>x</em> += [3,] is equivalent to <em>x</em> =
<em>x</em> + [3,] in Harmony. (In Python, the following two compound
statements lead to different results for <em>y</em>: <em>x</em> = <em>y</em> = [ ]; <em>x</em> +=
[3] and <em>x</em> = <em>y</em> = [ ]; <em>x</em> = <em>x</em> + [3].)</p>
<h3 id="assert"><strong>assert</strong></h3>
<p>The statement <strong>assert</strong> <em>b</em> evaluates <em>b</em> and reports an error if <em>b</em>
is false. It should be considered a no-op---it is part of the
<em>specification</em>, not part of the <em>implementation</em> of the algorithm. In
particular, it specifies an invariant: whenever the program counter is
at the location where the <strong>assert</strong> statement is, then <em>b</em> is always
true.</p>
<p>If <em>b</em> is an expression, then it is evaluated atomically. Moreover, the
expression is not allowed to change the state. If it does change the
state, Harmony will report an error as well.</p>
<p>As in Python, you can specify an additional expression: <strong>assert</strong> <em>b</em>,
<em>e</em>. The value of <em>e</em> will be reported as part of the error should <em>b</em>
evaluate to false.</p>
<h3 id="atomically"><strong>atomically</strong></h3>
<p>A statement can be preceded by the <strong>atomically</strong> keyword to make the
statement atomic. The statement <strong>atomically</strong>: <code>S1</code>; <code>S2</code>; ...
evaluates statements <code>S1</code>, <code>S2</code>, ... atomically. This means that the
statement runs indivisibly---no other thread can interleave in the
atomic statement. The only exception to this is if the atomic block
executes a <strong>stop</strong> expression. In this case, another thread can run.
When the original thread is resumed (using a <strong>go</strong> statement), it is
once again atomically executing.</p>
<p><strong>atomically</strong> statements are useful for specification and implementing
synchronization primitives such as test-and-set. It is also useful for
testing. It is not a replacement for lock/unlock, and should not
generally be used for synchronization otherwise. Lock/unlock does allow
other threads to run concurrently---just not in the same critical
section.</p>
<h3 id="await"><strong>await</strong></h3>
<p>The statement <strong>await</strong> <em>b</em> is equivalent to <strong>when</strong> <em>b</em>: <strong>pass</strong>. It
is intended to improve readability of your code.</p>
<h3 id="const"><strong>const</strong></h3>
<p>The expression <strong>const</strong> <code>N</code> = 3 introduces a new constant <code>N</code> with the
value 3. Evaluating <code>N</code> does not lead to loading from a memory location.
The assignment can be overridden with the <code>-c</code> flag: <code>harmony -cN=4</code>
executes the model checker with 4 assigned to <code>N</code> instead of 3. Harmony
also supports <strong>const</strong> <code>N</code>, <code>M</code> = 3, 4, which assigns 3 to <code>N</code> and 4 to
<code>M</code>. Harmony has limited support for <em>constant folding</em>. For example,
<strong>const</strong> <code>N</code> = 3 + 4 assigns value 7 to constant <code>N</code>.</p>
<h3 id="def"><strong>def</strong></h3>
<p>The statement <strong>def</strong> <em>m</em> <em>a</em>: <code>S1</code>; <code>S2</code>: ... defines a new program
counter constant <em>m</em> referring to a method that takes an argument <em>a</em>
and executes the statements <code>S1</code>, <code>S2</code>, .... The argument <em>a</em> can be a
tuple pattern similar to those used in <strong>let</strong> and <strong>for</strong> statements.
Examples include (), (<em>x</em>,), (<em>x</em>, <em>y</em>), and (<em>x</em>, (<em>y</em>, <em>z</em>)). The
given local variable names are assigned upon application and are
read-only. Each method has a predefined local variable <em>result</em>,
initialized to <code>None</code>, that is returned by the method. Harmony does not
support a <code>return</code> statement that <em>breaks out</em> of the code before
executing the last statement.</p>
<h3 id="del"><strong>del</strong></h3>
<p>The statement <strong>del</strong> <em>x</em> removes variable <em>x</em> from the state. <em>x</em> can
be either a local or a shared variable. For example, the statement
<strong>del</strong> <em>x</em>.<em>age</em> removes the .<em>age</em> field from dictionary <em>x</em>. Harmony
automatically removes top-level local variables that are no longer in
use from the state in order to attempt to reduce the number of states
that are evaluated during model checking.</p>
<p>Because Harmony lists are dictionaries, deleting from lists is different
from Python: <code>del</code> can also be used to remove elements from a list.
<code>x = [.a, .b, .c]; del x[1]</code> results in <em>x</em> having value <code>[.a, .c]</code>.</p>
<h3 id="for-in-where"><strong>for</strong> ... <strong>in</strong> ... [<strong>where</strong> ...]</h3>
<p>The statement <strong>for</strong> <em>x</em> <strong>in</strong> <em>y</em>: <code>S1</code>; <code>S2</code>; ... iterates over <em>y</em>
and executes for each element the statements <code>S1</code>, <code>S2</code>, .... <em>y</em> must
be a set, list, dictionary, or string. <em>y</em> is evaluated only once at the
beginning of the evaluation of this statement. In case of a set, the
result is sorted (using Harmony's global order on all values). In case
of a dictionary, the statement iterates over the keys in order. This makes
iterating over lists intuitive and identical to Python. For each element,
the statements <code>S1</code>, <code>S2</code>, ... are executed with local variable <em>y</em>
having the value of the element. <em>x</em> can be a pattern such as <span class="arithmatex">\((a)\)</span> or
<span class="arithmatex">\((a, (b, c))\)</span>. If the pattern cannot be matched, Harmony detects and
error. It is allowed, but discouraged, to assign different values to <em>x</em>
within statements <code>S1</code>, <code>S2</code>, ....</p>
<p>Harmony also supports the form <strong>for</strong> <em>k</em>:<em>v</em>
<strong>in</strong> <em>y</em>: <code>S1</code>; <code>S2</code>; .... This works similar, except that <em>k</em> is
bound to the key and <em>v</em> is bound to the value.
If <em>y</em> is not a dictionary, then <em>k</em> ranges from 0 to
<em>len</em>(<em>y</em>) - 1.</p>
<p>The statement also supports nesting and filtering. Nesting is of the
form <strong>for</strong> <em>x1</em> <strong>in</strong> <em>y1</em> <strong>for</strong> <em>x2</em> <strong>in</strong> <em>y2</em>: <code>S1</code>; <code>S2</code>;
..., which is equivalent to the statement <strong>for</strong> <em>x1</em> <strong>in</strong> <em>y1</em>:
<strong>for</strong> <em>x2</em> <strong>in</strong> <em>y2</em>: <code>S1</code>; <code>S2</code>; .... Filtering is of the form
<strong>for</strong> <em>x</em> <strong>in</strong> <em>y</em> <strong>where</strong> <em>z</em>: <code>S1</code>; <code>S2</code>; .... For example,
<strong>for</strong> <em>x</em> <strong>in</strong> 1 .. 10 <strong>where</strong> (<em>x</em> % 2) == 0: <code>S1</code>; <code>S2</code>; ...
only evaluates statements <code>S1</code>, <code>S2</code>, ... for even <em>x</em>, that is, 2, 4,
6, 8, and 10.</p>
<p>Harmony does not support <strong>break</strong> or <strong>continue</strong> statements.</p>
<h3 id="from-import"><strong>from</strong> ... <strong>import</strong></h3>
<p>The statement <strong>from</strong> <em>x</em> <strong>import</strong> <em>a</em>, <em>b</em>, ... imports module <em>x</em>
and makes its constants <em>a</em>, <em>b</em>, ... also constants in the current
module. If a module is imported more than once, its code is only
included the first time. The constants will typically be the names of
methods (program counter constants) within the module.</p>
<p>You can import all constants from a module <em>m</em> (including program
counter constants) using the statement <strong>from</strong> <em>m</em> <strong>import</strong> *. This,
however, excludes constants whose names start with the character <code>_</code>:
those are considered <em>private</em> to the module.</p>
<h3 id="go"><strong>go</strong></h3>
<div class="highlight"><span class="filename">fork.hny</span><pre><span></span><code><span class="k">def</span> <span class="nf">fork</span><span class="p">():</span>
    <span class="n">atomically</span><span class="p">:</span>
        <span class="n">let</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span> <span class="o">=</span> <span class="n">save</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">r</span>
            <span class="k">if</span> <span class="n">r</span><span class="p">:</span>
                <span class="n">go</span> <span class="n">ctx</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">fork</span><span class="p">():</span>
        <span class="nb">print</span> <span class="s2">&quot;parent&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;child&quot;</span>

<span class="n">spawn</span> <span class="n">eternal</span> <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<figcaption>Figure A.1 (<a href="https://harmony.cs.cornell.edu/code/fork.hny">code/fork.hny</a>): 
Using `save` and `go` to implement `fork()`</figcaption>

<p>The statement <strong>go</strong> <em>c</em> <em>e</em> starts a thread with context <em>c</em> that has
executed a <strong>stop</strong> or <strong>save</strong> expression. The <strong>stop</strong> or <strong>save</strong> 
expression returns value <em>e</em>. The same context can be started multiple times,
allowing threads to <em>fork</em>. See Figure A.1 for an example.</p>
<h3 id="if-elif-else"><strong>if</strong> ... [<strong>elif</strong> ...]* [<strong>else</strong>]</h3>
<p>Harmony supports <strong>if</strong> statements. In its most basic form, <strong>if</strong> <em>c</em>:
<code>S1</code>; <code>S2</code>; ... evaluates <em>c</em> and executes statements <code>S1</code>, <code>S2</code>, ...
if and only if boolean expression <em>c</em> evaluated to true. Harmony checks
that <em>c</em> is either <code>False</code> or <code>True</code>---if neither is the case, Harmony
reports an error. The statement <strong>if</strong> <em>c</em>: <code>S1</code>, <code>S2</code>, ... <strong>else</strong>:
<code>T1</code>; <code>T2</code>; ... is similar, but executes statements <code>T1</code>, <code>T2</code>, ... if
and only if <em>c</em> evaluated to <code>False</code>. You can think of <strong>elif</strong> <span class="arithmatex">\(c:\)</span> as
shorthand for <strong>else</strong>: <strong>if</strong> <em>c</em>:.</p>
<h3 id="import"><strong>import</strong></h3>
<p>The statement <strong>import</strong> <em>m1</em>, <em>m2</em>, ... imports modules <em>m1</em>, <em>m2</em>,
... in that order. If a module is imported more than once, its code is
only included the first time. The constants (including method constants)
and shared variables declared in that module can subsequently be
referenced by prepending "<em>m</em>.". For example, method <code>f</code>() in imported
module <em>m</em> is invoked by calling <em>m</em>.<code>f</code>(). If you would prefer to
invoke it simply as <code>f</code>(), then you have to import using the statement
<strong>from</strong> <em>m</em> <strong>import</strong> <code>f</code>.</p>
<h3 id="invariant"><strong>invariant</strong></h3>
<p>The statement <strong>invariant</strong> <em>c</em> declares that boolean expression <em>c</em> is
an invariant. <em>c</em> is only allowed to read shared variables and is
evaluated atomically after every state change. If it ever evaluates to
<code>False</code> Harmony reports and error. Harmony also reports an error if the
expression evaluates to a value other than <code>False</code> or <code>True</code>.</p>
<h3 id="let"><strong>let</strong></h3>
<p>You can introduce new bound variables in a method using the <strong>let</strong>
statement. The statement <strong>let</strong> <em>a</em> = <em>b</em>: <code>S1</code>; <code>S2</code>, ... evaluates
<em>b</em>, assigns the result to read-only variable <em>a</em>, and evaluates
statements <code>S1</code>, <code>S2</code>, .... <strong>let</strong> supports pattern matching, so you
can write <strong>let</strong> <em>x</em>, (<em>y</em>, <em>z</em>) = <em>b</em>: <code>S1</code>; <code>S2</code>, .... This will
only work if <em>b</em> is a tuple with two elements, the second of which also
being a tuple with two elements---if not, Harmony will report an error.</p>
<p><strong>let</strong> statements may be nested, such as <strong>let</strong> <em>a1</em> = <em>b1</em> <strong>let</strong>
<em>a2</em> = <em>b2</em>: <code>S1</code>; <code>S2</code>; .... Doing so can improve readability by
reducing indentation compared to writing them as separate statements.
Compare the following two examples:</p>
<div class="highlight"><pre><span></span><code><span class="n">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">y</span><span class="p">:</span>
<span class="n">let</span> <span class="n">b</span> <span class="o">=</span> <span class="n">z</span><span class="p">:</span>
<span class="o">...</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">let</span> <span class="n">b</span> <span class="o">=</span> <span class="n">z</span><span class="p">:</span>
</code></pre></div>
<h3 id="pass"><strong>pass</strong></h3>
<p>The <strong>pass</strong> statement does nothing.</p>
<h3 id="print"><strong>print</strong></h3>
<p>The statement <strong>print</strong> <em>e</em> evaluates <em>e</em> and adds the result to the
print log. The print log is used to create an "external behavior DFA"
for the Harmony program.</p>
<h3 id="sequential"><strong>sequential</strong></h3>
<p>In Harmony, shared variable <code>Load</code> and <code>Store</code> operations are atomic and
have <em>sequential consistency</em>. However, Harmony does check for <em>data
races</em>. A data race occurs when two or more threads simultaneously
access the same shared variable, with at least one of the accesses being
a <code>Store</code> operation <em>outside of an atomic block</em>. If so, Harmony will
report an error. This error can be suppressed by declaring the shared
variable as sequential. In particular, the statement <strong>sequential</strong> <em>x</em>,
<em>y</em>, ... specifies that the algorithm assumes that the given variables
have sequential consistency.</p>
<p>Note that few modern processors support sequentially consistent memory
by default, as doing so would lead to high overhead.</p>
<h3 id="spawn"><strong>spawn</strong></h3>
<p>The statement <strong>spawn</strong> <em>m</em> <em>a</em> starts a new thread that executes method
<em>m</em> with argument <em>a</em>. <em>m</em> must be a program counter constant, and <em>a</em>
is typically a tuple containing zero or more parameters to be passed to
the method.</p>
<p>The default thread-local state of the thread, called <em>self</em>, is the
empty dictionary by default. It can be specified by adding a parameter:
<strong>spawn</strong> <em>m</em> <em>a</em>, <em>e</em> specifies that <em>e</em> should be the initial value of
the thread-local state.</p>
<p>Harmony normally checks that all threads eventually terminate. If a
thread may never terminate, you should spawn it with <strong>spawn</strong>
<strong>eternal</strong> <em>m</em> <em>a</em> to suppress those checks.</p>
<h3 id="trap"><strong>trap</strong></h3>
<p>The statement <strong>trap</strong> <em>m</em> <em>a</em> specifies that the current thread should
execute method <em>m</em> with argument <em>a</em> and some future, unspecified, time.
It models a timer interrupt or any kind of asynchronous event to be
handled by the thread. Such interrupts can be disabled by setting the
interrupt level of the thread to <code>True</code> using the <strong>setintlevel</strong>
operator.</p>
<h3 id="var"><strong>var</strong></h3>
<p>You can introduce new local variables in a method using the <strong>var</strong>
statement. The statement <strong>var</strong> <em>a</em> = <em>b</em> evaluates <em>b</em> and assigns the
result to local variable <em>a</em>. <strong>var</strong> supports pattern matching, so you
can write <strong>var</strong> <em>x</em>, (<em>y</em>, <em>z</em>) = <em>b</em>. This will only work if <em>b</em> is a
tuple with two elements, the second of which also being a tuple with two
elements---if not, Harmony will report an error.</p>
<h3 id="when"><strong>when</strong></h3>
<p>The statement <strong>when</strong> <em>c</em>: <code>S1</code>; <code>S2</code>; ... executes statements <code>S1</code>,
<code>S2</code>, ... after waiting until <em>c</em> evaluates to <code>True</code>. <strong>when</strong>
statements are most useful when combined with the <strong>atomically</strong>
keyword. If <em>waiting</em> is an unused local variable, then <strong>atomically</strong>
<strong>when</strong> <em>c</em>: <code>S1</code>; <code>S2</code>; ... is equivalent to</p>
<div class="highlight"><pre><span></span><code><span class="n">var</span> <span class="n">waiting</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">while</span> <span class="n">waiting</span><span class="p">:</span>
<span class="n">atomically</span><span class="p">:</span>
<span class="k">if</span> <span class="n">c</span><span class="p">:</span>
<span class="n">S1</span>
<span class="n">S2</span>
<span class="o">...</span>
<span class="n">waiting</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p>Multiple <strong>let</strong> and <strong>when</strong> statements can be combined. The
expressions before the colon are re-evaluated repeated until all
<strong>when</strong> conditions are satisfied.</p>
<h3 id="when-exists-in"><strong>when</strong> <strong>exists</strong> ... <strong>in</strong> ...</h3>
<p>The statement <strong>when</strong> <strong>exists</strong>} <em>x</em> <strong>in</strong> <em>y</em>: <code>S1</code>; <code>S2</code>; ...
requires that <em>y</em> evaluates to a set value. The statement does the
following three things:</p>
<ul>
<li>
<p>it waits until <em>y</em> is non-empty;</p>
</li>
<li>
<p>it selects one element of <em>y</em> non-deterministically (using a
    <strong>choose</strong> expression);</p>
</li>
<li>
<p>it executes statements <code>S1</code>, <code>S2</code>, ... with the selected element
    bound to read-only variable <em>x</em>.</p>
</li>
</ul>
<p><em>x</em> may be a pattern, like in <strong>let</strong>, <strong>for</strong>, and <strong>def</strong> statements.
Harmony reports an error if <em>y</em> evaluates to a value that is not a set.</p>
<p><strong>when</strong> statements are most useful when combined with the
<strong>atomically</strong> keyword. If <em>waiting</em> is an unused local variable, then
<strong>atomically</strong> <strong>when</strong> <strong>exists</strong> <em>x</em> <strong>in</strong> <em>y</em>: <code>S1</code>; <code>S2</code>; ... is
equivalent to</p>
<div class="highlight"><pre><span></span><code><span class="n">var</span> <span class="n">waiting</span> <span class="o">=</span> <span class="kc">True</span><span class="p">:</span>
<span class="k">while</span> <span class="n">waiting</span><span class="p">:</span>
<span class="n">atomically</span><span class="p">:</span>
<span class="k">if</span> <span class="n">y</span> <span class="o">!=</span> <span class="p">{}:</span>
<span class="n">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">choose</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
<span class="n">S1</span>
<span class="n">S2</span>
<span class="o">...</span>
<span class="n">waiting</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div>
<p>The statement is particularly useful in programming network protocols
when having to wait for one or more messages and executing a set of
actions atomically after the desired messages have arrived.</p>
<h3 id="while"><strong>while</strong></h3>
<p>The statement <strong>while</strong> <em>c</em>: <code>S1</code>; <code>S2</code>; ... executes statements <code>S1</code>,
<code>S2</code>, ... repeatedly as long as <em>c</em> evaluates to <code>True</code>. Harmony does
not support <strong>break</strong> or <strong>continue</strong> statements.</p>
<h2 id="harmony-is-not-object-oriented">Harmony is not object-oriented</h2>
<p>Python is object-oriented, but Harmony is not. For Python programmers,
this can lead to some unexpected differences. For example, consider the
following code:</p>
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">]</span>
<span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">assert</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
</code></pre></div>
<p>In Python, lists are objects. Thus <em>x</em> and <em>y</em> point to the same list,
and the assertion would fail if executed by Python. In Harmony, lists
are values. So, when <em>x</em> is updated in Line2, it does not affect the
value of <em>y</em>. The assertion succeeds. Harmony supports references to
values (<a href="../method/">Chapter 7</a>), allowing programs to implement shared objects.</p>
<p>Because Harmony does not have objects, it also does not have object
methods. However, Harmony methods and lambdas are program counter
constants. These constants can be added to dictionaries. For example, in
Figure 7.1 you can add the <code>P_enter</code> and <code>P_exit</code> methods
to the <code>P_mutex</code> dictionary like so:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> <span class="o">.</span><span class="n">turn</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="o">.</span><span class="n">flags</span><span class="p">:</span> <span class="p">[</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span> <span class="p">],</span> <span class="o">.</span><span class="n">enter</span><span class="p">:</span> <span class="n">P_enter</span><span class="p">,</span> <span class="o">.</span><span class="n">exit</span><span class="p">:</span> <span class="n">P_exit</span> <span class="p">}</span>
</code></pre></div>
<p>That would allow you to simulate object methods.</p>
<p>There are at least two reasons why Harmony is not object-oriented.
First, object-orientation often adds layers of indirection that would
make it harder to model check and also to interpret the results.
Consider, for example, a lock. In Python, a lock is an object. A lock
variable would contain a reference to a lock object. In Harmony, a lock
variable contains the value of the lock itself. Thus, the following
statement means something quite different in Python and Harmony:</p>
<div class="highlight"><pre><span></span><code><span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
</code></pre></div>
<p>In Python, this creates two variables <em>x</em> and <em>y</em> referring to the same
lock. In Harmony, the two variables will be two different locks. If you
want two variables referring to the same lock in Harmony, you might
write:</p>
<div class="highlight"><pre><span></span><code><span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="err">?</span><span class="n">lock</span>
</code></pre></div>
<p>The second reason for Harmony not being object-oriented is that many
concurrency solutions in the literature are expressed in C or some other
low-level language that does not support object-orientation, but instead
use <code>malloc</code> and <code>free</code>.</p>
<h2 id="constants-global-and-local-variables">Constants, Global and Local Variables</h2>
<p>Each (non-reserved) identifier in a Harmony program refers to either a
global constant, a global shared variable, a local bound variable, a
local mutable variable, or a module. Constants are declared using
<strong>const</strong> statements. Those constants are computed at compile-time.</p>
<p>Local variables all declared. Bound variables can be declared in <strong>def</strong>
statements (i.e., arguments), <strong>let</strong> statements, <strong>for</strong> loops, and
<code>when exists</code> statements. Mutable variables can be declared with the
<strong>var</strong> statement. Also, each method has an implicitly declared <em>result</em>
variable, which is initialized to <code>None</code>. Each thread has a mutable
variable called <strong>this</strong> that contains the thread-local state. Local
variables are tightly scoped and cannot be shared between threads. While
in theory one method can be declared within another, they cannot share
local variables either. All other variables are global and must be
initialized before any threads are spawned.</p>
<h2 id="operator-precedence">Operator Precedence</h2>
<p>In Harmony, there is no syntactic difference between applying an
argument to a function or an index to a dictionary. Both use the syntax
<em>a</em> <em>b</em> <em>c</em> .... We call this <em>application</em>, and application is
left-associative. So, <em>a</em> <em>b</em> <em>c</em> is interpreted as (<em>a</em> <em>b</em>) <em>c</em>: <em>b</em>
is applied to <em>a</em>, and then <em>c</em> is applied to the result. For
readability, it may help to write <span class="arithmatex">\(a(b)\)</span> for function application and
<span class="arithmatex">\(a[b]\)</span> for indexing. In case <em>b</em> is a simple string, you can also write
<span class="arithmatex">\(a.b\)</span> for indexing.</p>
<p>There are three levels of precedence. Application has the highest
precedence. So, !<em>a</em> <em>b</em> is interpreted as !(<em>a</em> <em>b</em>) and <em>a</em> <em>b</em> + <em>c</em>
<em>d</em> is interpreted as (<em>a</em> <em>b</em>) + (<em>c</em> <em>d</em>). Unary operators have the
next highest precedence, and the remaining operators have the lowest
precedence. For example, <span class="arithmatex">\(-2 + 3\)</span> evaluates to 1, not <span class="arithmatex">\(-5\)</span>.</p>
<p>Associative operators (<span class="arithmatex">\(+\)</span>, <span class="arithmatex">\(*\)</span>, <span class="arithmatex">\(|\)</span>, <span class="arithmatex">\(\string&amp;\)</span>, <span class="arithmatex">\(\string^\)</span>, <strong>and</strong>,
<strong>or</strong>) are interpreted as general <span class="arithmatex">\(n\)</span>-ary operators, and you are
allowed to write <span class="arithmatex">\(a + b + c\)</span>. However, <span class="arithmatex">\(a - b - c\)</span> is illegal, as is any
combination of operators with an arity larger than one, such as
<span class="arithmatex">\(a + b &lt; c\)</span>. In such cases you have to add parentheses or brackets to
indicate what the intended evaluation order is, such as <span class="arithmatex">\((a + b) &lt; c\)</span>.</p>
<p>In almost all expressions, subexpressions are evaluated left to right.
So, <em>a</em>[<em>b</em>] + <em>c</em> first evaluates <em>a</em>, then <em>b</em> (and then applies <em>b</em>
to <em>a</em>), and then <em>c</em>. The one exception is the expression <em>a</em> <strong>if</strong>
<em>c</em> <strong>else</strong> <em>b</em>, where <em>c</em> is evaluated first. In that expression, only
<em>a</em> or <em>b</em> is evaluated depending on the value of <em>c</em>. In the expression
<em>a</em> <strong>and</strong> <em>b</em> <strong>and</strong> <span class="arithmatex">\(...\)</span>, evaluation is left to right but stops
once one of the subexpressions evaluates to <code>False</code>. Similarly for
<strong>or</strong>, where evaluation stops once one of the subexpressions evaluates
to <code>True</code>. A sequence of comparison operations, such as <span class="arithmatex">\(a &lt; b &lt; c\)</span>, is
evaluated left to right but stops as soon as one of the comparisons
fails.</p>
<p>As an aside: the expression <em>a</em> <strong>not</strong> <strong>in</strong> <em>b</em> is equivalent to
<strong>not</strong> (<em>a</em> <strong>in</strong> <em>b</em>). Harmony generalizes this construct for any
pair of a unary (except '<span class="arithmatex">\(-\)</span>') and a binary operator. In particular, <em>a</em>
<strong>not</strong> <strong>and</strong> <em>b</em> is the same as <strong>not</strong> (<em>a</em> <strong>and</strong> <em>b</em>). For those
familiar with logic gates, <strong>not</strong> <strong>and</strong> is the equivalent of <code>NAND</code>.
Similarly, <strong>not</strong> =<span class="arithmatex">\(&gt;\)</span> is non-implication.</p>
<h2 id="tuples-lists-and-pattern-matching">Tuples, Lists, and Pattern Matching</h2>
<p>Harmony tuples and lists are equivalent.
They can be bracketed either by '(' and ')' or by '[' and
']', but the brackets are often optional. Importantly, with a singleton
list, the one element must be followed by a comma. For example, the
statement <code>x = 1,;</code> assigns a singleton tuple (or list) to <em>x</em>.</p>
<p>Harmony does not support special slicing syntax like Python. To
modify lists, use the <code>subseq</code> method in the <code>list</code> module.</p>
<p>Harmony allows pattern matching against nested tuples in various
language constructs. The following are the same in Python and Harmony:</p>
<ul>
<li>
<p><em>x</em>, = 1,: assigns 1 to <em>x</em>;</p>
</li>
<li>
<p><em>x</em>, <em>y</em> = 1, (2, 3): assigns 1 to <em>x</em> and (2, 3) to <em>y</em>;</p>
</li>
<li>
<p><em>x</em>, (<em>y</em>, <em>z</em>) = 1, (2, 3): assigns 1 to <em>x</em>, 2 to <em>y</em>, and 3 to
    <span class="arithmatex">\(z\)</span>;</p>
</li>
<li>
<p><em>x</em>, (<em>y</em>, <em>z</em>) = 1, 2: generates an runtime error because 2 cannot
    be matched with (<em>y</em>, <em>z</em>);</p>
</li>
<li>
<p><em>x</em>[0], <em>x</em>[1] = <em>x</em>[1], <em>x</em>[0]: swaps the first two
    elements of list <em>x</em>.</p>
</li>
</ul>
<p>As in Python, pattern matching can also be used in <strong>for</strong> statements.
For example:</p>
<p><strong>for</strong> <em>key</em>, <em>value</em> <strong>in</strong> [ (1, 2), (3, 4) ]: ...</p>
<p>Harmony (but not Python) also allows pattern matching in defining and
invoking methods. For example, you can write:</p>
<p><strong>def</strong> <code>f</code>[<em>a</em>, (<em>b</em>, <em>c</em>)]: ...</p>
<p>and then call <code>f</code>[1, (2, 3)]. Note that the more familiar: <strong>def</strong>
<code>g</code>(<em>a</em>) defines a method <code>g</code> with a single argument <em>a</em>. Invoking
<code>g</code>(1, 2) would assign the tuple (1, 2) to <em>a</em>. This is not consistent
with Python syntax. For single argument methods, you may want to declare
as follows: <strong>def</strong> g(<span class="arithmatex">\(a,\)</span>). Calling g(1,) assigns 1 to <em>a</em>, while
calling g(1, 2) would result in a runtime error as (1, 2) cannot be
matched with (<em>a</em>,).</p>
<p>Pattern matching can also be used in <strong>const</strong>, <strong>let</strong>, and <strong>when</strong>
<strong>exists</strong> statements.</p>
<blockquote>
<p>### For Loops and Comprehensions
  While Harmony does not support general iterators such as Python does,
  Harmony allows iterating over sets, lists, and dictionaries.
  When iterating over a set, the set is always traversed in order
  (see <a href="./">Language Details</a> for how Harmony values are ordered).
  When iterating over a dictionary, it is always traversed in the order
  of the keys.</p>
<p>Harmony supports nesting and filtering in <strong>for</strong> loops.</p>
<p>For example:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">{</span> <span class="mf">1..10</span> <span class="p">}</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">{</span> <span class="mf">1..10</span> <span class="p">}</span> <span class="n">where</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div>
In case of dictionaries, you can access both keys and values (not
supported in Python):
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="n">k</span><span class="p">:</span><span class="n">v</span> <span class="ow">in</span> <span class="o">.</span><span class="n">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="n">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">:</span> <span class="o">...</span>
</code></pre></div>
Harmony also supports set, list, and dictionary comprehensions.
Comprehensions are similar to Python, except that filtering uses
the keyword <code>where</code> instead of <code>if</code>.</p>
</blockquote>
<h2 id="dynamic-allocation">Dynamic Allocation</h2>
<p>Harmony supports various options for dynamic allocation. By way of
example, consider a stack. Figure A.2 presents a test program for
a stack. We present four different stack implementations to illustrate
options for dynamic allocation:</p>
<ol>
<li>
<p>Figure A.3 uses a single list to represent the stack. It is
    updated to perform <code>push</code> and <code>pop</code> operations;</p>
</li>
<li>
<p>Figure A.4 also uses a list but, instead of updating the list,
    it replaces the list with a new one for each operation;</p>
</li>
<li>
<p>Figure A.5 represents a stack as a recursively nested tuple
    <span class="arithmatex">\((v, f)\)</span>, where <em>v</em> is the element on top of the stack and <em>r</em> is a
    stack that is the remainder;</p>
</li>
<li>
<p>Figure A.6 implements a stack as a linked list with nodes
    allocated using the <code>alloc</code> module.</p>
</li>
</ol>
<p>While the last option is the most versatile (it allows cyclic data
structures), Harmony does not support garbage collection for memory
allocated this way and so allocated memory that is no longer in use must
be explicitly released using <code>free</code>.</p>
<div class="highlight"><span class="filename">stacktest.hny</span><pre><span></span><code><span class="kn">from</span> <span class="nn">stack</span> <span class="kn">import</span> <span class="n">Stack</span><span class="p">,</span> <span class="n">push</span><span class="p">,</span> <span class="n">pop</span>

<span class="n">teststack</span> <span class="o">=</span> <span class="n">Stack</span><span class="p">()</span>
<span class="n">push</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">push</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pop</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">2</span>
<span class="n">push</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pop</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">3</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">pop</span><span class="p">(</span><span class="err">?</span><span class="n">teststack</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">v</span> <span class="o">==</span> <span class="mi">1</span>
</code></pre></div>
<figcaption>Figure A.2 (<a href=https://harmony.cs.cornell.edu/code/stacktest.hny>code/stacktest.hny</a>): 
Testing a stack implementation. </figcaption>

<div class="highlight"><span class="filename">stack1.hny</span><pre><span></span><code><span class="k">def</span> <span class="nf">Stack</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)[</span><span class="nb">len</span><span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)]</span> <span class="o">=</span> <span class="n">v</span>

<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="n">let</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)[</span><span class="n">n</span><span class="p">]</span>
        <span class="k">del</span> <span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)[</span><span class="n">n</span><span class="p">]</span>
</code></pre></div>
<figcaption>Figure A.3 (<a href=https://harmony.cs.cornell.edu/code/stack1.hny>code/stack1.hny</a>): 
Stack implemented using a dynamically updated list.
</figcaption>

<div class="highlight"><span class="filename">stack2.hny</span><pre><span></span><code><span class="kn">import</span> <span class="nn">list</span>

<span class="k">def</span> <span class="nf">Stack</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="err">!</span><span class="n">st</span> <span class="o">+=</span> <span class="p">[</span><span class="n">v</span><span class="p">,]</span>

<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="n">let</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)[</span><span class="n">n</span><span class="p">]</span>
        <span class="err">!</span><span class="n">st</span> <span class="o">=</span> <span class="nb">list</span><span class="o">.</span><span class="n">subseq</span><span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
</code></pre></div>
<figcaption>Figure A.4 (<a href=https://harmony.cs.cornell.edu/code/stack2.hny>code/stack2.hny</a>): 
Stack implemented using static lists. </figcaption>

<div class="highlight"><span class="filename">stack3.hny</span><pre><span></span><code><span class="k">def</span> <span class="nf">Stack</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">()</span>

<span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="p">(</span><span class="err">!</span><span class="n">st</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="err">!</span><span class="n">st</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="n">let</span> <span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">rest</span><span class="p">)</span> <span class="o">=</span> <span class="err">!</span><span class="n">st</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">top</span>
        <span class="err">!</span><span class="n">st</span> <span class="o">=</span> <span class="n">rest</span>
</code></pre></div>
<figcaption>Figure A.5 (<a href=https://harmony.cs.cornell.edu/code/stack3.hny>code/stack3.hny</a>): 
Stack implemented using a recursive tuple data structure.
</figcaption>

<div class="highlight"><span class="filename">stack4.hny</span><pre><span></span><code><span class="kn">from</span> <span class="nn">alloc</span> <span class="kn">import</span> <span class="n">malloc</span><span class="p">,</span> <span class="n">free</span>

<span class="k">def</span> <span class="nf">Stack</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="err">!</span><span class="n">st</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">({</span> <span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span> <span class="o">.</span><span class="n">rest</span><span class="p">:</span> <span class="err">!</span><span class="n">st</span> <span class="p">})</span>

<span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="n">st</span><span class="p">):</span>
    <span class="n">let</span> <span class="n">node</span> <span class="o">=</span> <span class="err">!</span><span class="n">st</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">value</span>
        <span class="err">!</span><span class="n">st</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">rest</span>
        <span class="n">free</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>
<figcaption>Figure A.6 (<a href=https://harmony.cs.cornell.edu/code/stack4.hny>code/stack4.hny</a>): 
Stack implemented using a linked list. </figcaption>

<h2 id="comments">Comments</h2>
<p>Harmony supports the same commenting conventions as Python. In addition,
Harmony supports nested multi-line comments of the form <code>(* comment *)</code>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../commandline/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Using the Command Line" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Using the Command Line
            </div>
          </div>
        </a>
      
      
        
        <a href="../hvm/" class="md-footer__link md-footer__link--next" aria-label="Next: The Harmony Virtual Machine " rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              The Harmony Virtual Machine 
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 - 2022 Robbert van Renesse
          </div>
        
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>